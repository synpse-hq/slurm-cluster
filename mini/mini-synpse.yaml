name: mini-slurm
scheduling:
  type: Conditional
  selectors:
    type: server
spec:
  containers:
    - name: slurmjupyter
      image: rancavil/slurm-jupyter:19.05.5-1
      hostname: slurmjupyter
      ports:
        - 8888:8888
      volumes:
        - /data/slurm:/home/admin
      restartPolicy: {}
    - name: slurmmaster
      image: rancavil/slurm-master:19.05.5-1
      hostname: slurmmaster
      user: admin
      ports:
        - 6817:6817
        - 6818:6818
        - 6819:6819
      volumes:
        - /data/slurm:/home/admin
      restartPolicy: {}
    - name: slurmnode1
      image: rancavil/slurm-node:19.05.5-1
      hostname: slurmnode1
      user: admin
      volumes:
        - /data/slurm:/home/admin
      env:
        - name: SLURM_NODENAME
          value: slurmnode1
      restartPolicy: {}
    - name: slurmnode2
      image: rancavil/slurm-node:19.05.5-1
      hostname: slurmnode2
      user: admin
      volumes:
        - /data/slurm:/home/admin
      env:
        - name: SLURM_NODENAME
          value: slurmnode2
      restartPolicy: {}
    - name: slurmnode3
      image: rancavil/slurm-node:19.05.5-1
      hostname: slurmnode3
      user: admin
      volumes:
        - /data/slurm:/home/admin
      env:
        - name: SLURM_NODENAME
          value: slurmnode3
      restartPolicy: {}
